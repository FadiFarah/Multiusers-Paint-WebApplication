@page "/room/{Id}"@page "/room/{Id}/{Password}"@using Blazor.Extensions.Canvas@using Microsoft.AspNetCore.Authorization@attribute [Authorize]@inherits GroupPaintOnlineWebApp.Client.PagesBase.RoomCanvasBase<AuthorizeView>    <Authorized>        <div style="position:fixed;z-index:1;display:@DisplayLoadingModal ;width:100%;height:200%; background-color:rgba(0,0,0,0.2)">            <div style="position:fixed;width:30%; height:20%; top:30%;left:35%">                <div style="padding:5%">                    <h1 style="padding:5%">LOADING DATA...</h1>                </div>            </div>        </div>        @if(ContributionRequesters.Count>0)        {        <div style="position:fixed;z-index:1;display:@DisplayContributionRequestModal ;width:100%;height:200%; background-color:rgba(0,0,0,0.2)">            <div style="position: fixed; width: 30%; background-color: white; height: 20%; top: 30%; left: 35%">                <div style="padding:5%">                    <div style="padding:5%">@ContributionRequesters.Last().Value is requesting to contribute.</div>                </div>                <div class="row">                    <span class="col col-1"></span>                    <button @onclick="ContributionRequestAccepted" class="col col-5 btn btn-dark">Accept Request</button>                    <button @onclick="ContributionRequestDeclined" class="col col-5 btn btn-danger">Decline Request</button>                    <span class="col col-1"></span>                </div>            </div>        </div>        }        <div style="position:fixed;z-index:2;display:@DisplayContributeModal ;width:100%;height:200%; background-color:rgba(0,0,0,0.2)">            <div style="position:fixed;background-color:white;width:40%; height:40%; top:30%;left:30%;border:1px solid black ; border-radius:1% 1%;">                <div style="padding:5%">                    <div style="padding:5%">By contributing to the painting work, every new change done will be automatically saved to your paintings list.</div>                    <hr />                    <div style="padding:5%">Are you sure you want to contribute?</div>                </div>                <div class="row">                    <span class="col col-1"></span>                    <button @onclick="() =>{ContributionAccepted(context.User.Identity.Name);}" class="col col-5 btn btn-dark">Contribute</button>                    <button @onclick="CloseContributeModal" class="col col-5 btn btn-danger">No</button>                    <span class="col col-1"></span>                </div>            </div>        </div>        <div @onclick="CloseClearModal" style="position:fixed;z-index:1;display:@DisplayClearModal ;width:100%;height:200%; background-color:rgba(0,0,0,0.2)">            <div style="position:fixed;background-color:white;width:40%; height:40%; top:30%;left:30%;border:1px solid black ; border-radius:1% 1%;">                <div style="padding:5%">                    <div style="padding:5%">By pressing yes, all of your current drawings will be permanently removed. You cannot undo this change.</div>                    <hr />                    <div style="padding:5%">Are you sure you want to continue?</div>                </div>                <div class="row">                    <span class="col col-1"></span>                    <button @onclick="ClearingAccepted" id="clear" class="col col-5 btn btn-dark">Yes</button>                    <button @onclick="CloseClearModal" class="col col-5 btn btn-danger">No</button>                    <span class="col col-1"></span>                </div>            </div>        </div>        <div style="position:fixed;z-index:2;display:@DisplayShareModal ;width:100%;height:200%; background-color:rgba(0,0,0,0.2)">            <div style="position:fixed;background-color:white;width:40%; height:50%; top:30%;left:30%;border:1px solid black ; border-radius:1% 1%;">                <div style="padding:5%">                    <div style="padding:5%">Send an invitation link to your friends so they can join you.</div>                    <hr />                    <div style="padding:5%">Enter the receiver's email address: </div>                    <div style="padding:5%"><input type="email" min="5" placeholder="Enter an email address..." @bind-value="ReceiverEmailInput" /></div>                </div>                <div class="row">                    <span class="col col-1"></span>                    <button @onclick="SharingAccepted" id="clear" class="col col-5 btn btn-dark">Send Invitation</button>                    <button @onclick="CloseShareModal" class="col col-5 btn btn-danger">Cancel</button>                    <span class="col col-1"></span>                </div>            </div>        </div>        <div style="position:absolute;z-index:1;display:@DisplayBlockScreen ;width:100%;height:100%;top:180px; background-color:rgba(0,0,0,0.04)">                  </div>        <div style="width: 20%; height: 30%; position: fixed; left: 75%; top: 62.5%; border: 2px solid black;display:@DisplayChatBox;">            <div style="overflow-y: scroll; background-color: white; height: 85%; width: 100%;" class="chat-box;">                <div class="flex-row align-items-end" style="flex-wrap:nowrap ;font-size: 1.0vw;  background-color: floralwhite">                    @if (ChatMessages != null)                    {                        foreach (var m in ChatMessages)                        {                    <div>@m</div>}}                </div>            </div>            <div style="height:15%">                <input @onkeyup="args => OnEnterPress(args,context.User.Identity.Name)" @bind-value="ChatInput" style=" font-size: 1.0vw; width: 100%; border:1px solid black; height: 100%; " id="save" type="text" />            </div>        </div>        <div style="width:100%;height:40px;background-color:white; box-shadow:0px 20px 15px rgba(0,0,0,0.8);">            <div>                <input @onclick="OpenShareModal" type="image" style="width:30px;height:30px; margin-left:20px;" src="https://static.thenounproject.com/png/37730-200.png" />                @if (IsContributed)                {                <input class="btn btn-dark" type="button" disabled value="@ContributeState" style="margin-left: 20px;" /> }                    else                    {                <input class="btn btn-dark" type="button" value="@ContributeState" style="margin-left: 20px;" @onclick="OpenContributeModal" />                }                <span style="margin-left: 20px">@SavingState</span>            </div>        </div>        <div @onclick="CloseChatBox" @onmousedown="CanvasOnMouseDown" @onmouseup="CanvasOnMouseUp" @onmouseout="CanvasOnMouseOut" class="d-flex justify-content-center align-items-stretch" style="width:100%">            <BECanvas Width="@((Width))" Height="@(Height-((Height/4)))"></BECanvas>        </div>        <div class="d-flex justify-content-around paint-tool-box" style="background-color:white;width:100%; height:@((Height/4)+"px")">            <div>                <input @onclick="UndoClick" id="undo" class="paint-tool" type="image" src="http://simpleicon.com/wp-content/uploads/undo-6.png" />            </div>            <div>                <input @onclick="RedoClick" id="redo" class="paint-tool" type="image" src="http://simpleicon.com/wp-content/uploads/redo-6.png" />            </div>            <div>                <input id="rectangle" class="paint-tool" type="image" src="https://static.thenounproject.com/png/932217-200.png">            </div>            <div>                <input id="circle" class="paint-tool" type="image" src="https://cdn4.iconfinder.com/data/icons/ionicons/512/icon-ios7-circle-outline-512.png">            </div>            <div>                <input id="arrow" class="paint-tool" type="image" src="https://cdn0.iconfinder.com/data/icons/feather/96/591276-arrow-right-512.png">            </div>            <div>                <input id="triangle" class="paint-tool" type="image" src="https://static.thenounproject.com/png/1208042-200.png">            </div>            <div>                <input id="dragger" class="paint-tool" type="image" src="https://icon-library.com/images/drag-icon/drag-icon-21.jpg">            </div>            <div>                <input id="filler" class="paint-tool" type="image" src="https://icon-library.com/images/fill-icon/fill-icon-27.jpg">            </div>            <div>                <input @onclick="OpenClearModal" id="clearModal" class="paint-tool" type="image" src="https://icons-for-free.com/iconfiles/png/512/trash+bin+icon-1320086460670911435.png">            </div>            <div>                <input id="eraser" class="paint-tool" type="image" src="https://cdn0.iconfinder.com/data/icons/outline-icons/320/Eraser-512.png">            </div>            <div class="input-color-container">                <input class="paint-tool" id="color" type="color">            </div>            <div>                <input class="paint-tool styled-slider slider-progress" id="size" type="range" min="1" max="100" value="2">            </div>            <div>                <input @onclick="ChatButtonClick" id="chat" type="image" class="paint-tool" src="http://cdn.onlinewebfonts.com/svg/img_382824.png" />            </div>        </div>    </Authorized></AuthorizeView>